---
title: "Operations Guide"
description: "Managing and operating Gulp jobs in production"
---

# Operations Guide

This guide covers the operational aspects of running Gulp jobs in production.

## Job Management

### Deployment

Deploy a job using the Gulp CLI:
```bash
gulp deploy job.yaml [--environment prod] [--parallelism 4]
```

Options:
- `--environment`: Target environment (dev/prod)
- `--parallelism`: Initial parallelism
- `--savepoint`: Resume from savepoint
- `--dry-run`: Validate without deploying

### Monitoring

Monitor job status and metrics:
```bash
# List all jobs
gulp jobs list

# Get job details
gulp jobs describe my-job

# View logs
gulp jobs logs my-job [--tail]

# View metrics
gulp jobs metrics my-job
```

### Scaling

Scale job parallelism:
```bash
gulp jobs scale my-job --parallelism 8
```

Auto-scaling configuration:
```yaml
scaling:
  enabled: true
  min: 2
  max: 10
  metrics:
    - type: "cpu"
      target: 70
    - type: "lag"
      target: 1000
```

## Resource Management

### State Cleanup

Configure state TTL:
```yaml
state:
  ttl:
    enabled: true
    days: 7
```

Manual cleanup:
```bash
gulp state cleanup my-job --older-than 7d
```

### Savepoints

Create savepoints:
```bash
# Manual savepoint
gulp savepoint create my-job

# List savepoints
gulp savepoint list my-job

# Restore from savepoint
gulp deploy job.yaml --savepoint sp-123
```

## Troubleshooting

### Common Issues

1. **High Backpressure**
   ```bash
   # Check backpressure metrics
   gulp metrics my-job --metric backpressure
   
   # Scale up if needed
   gulp jobs scale my-job --parallelism 8
   ```

2. **Out of Memory**
   ```bash
   # Check memory usage
   gulp metrics my-job --metric memory
   
   # Adjust memory configuration
   gulp jobs update my-job --jm-memory 4g --tm-memory 8g
   ```

3. **Checkpoint Failures**
   ```bash
   # View checkpoint details
   gulp checkpoints my-job
   
   # Adjust checkpoint interval
   gulp jobs configure my-job --checkpoint-interval 5min
   ```

### Diagnostics

Enable verbose logging:
```yaml
logging:
  level: DEBUG
  includeExceptions: true
```

Collect diagnostics:
```bash
gulp diagnostics collect my-job --duration 30m
```

## Security

### Role Management

Create service roles:
```bash
gulp iam create-role my-role --policy policy.json
```

Attach to job:
```yaml
security:
  serviceAccount: my-role
  encryption:
    enabled: true
```

### Audit Logging

Enable audit logging:
```yaml
audit:
  enabled: true
  retention: 90d
  destination: "s3://audit-logs"
```

View audit logs:
```bash
gulp audit logs --job my-job --start-time "2024-01-01"
```

## Best Practices

1. **Production Readiness**
   - Use version control for job definitions
   - Implement CI/CD pipelines
   - Test in staging environment
   - Configure monitoring and alerts

2. **Performance**
   - Monitor state size growth
   - Configure appropriate checkpointing
   - Use incremental checkpoints
   - Enable metrics collection

3. **Security**
   - Use least privilege roles
   - Enable encryption
   - Implement network policies
   - Regular security audits

4. **Cost Optimization**
   - Configure auto-scaling
   - Use appropriate instance types
   - Enable state cleanup
   - Monitor resource usage

<Tip>
**Pro Tip**: Use the `gulp validate` command to check your job configuration before deployment.
</Tip>

<Warning>
Always create a savepoint before making significant changes to a running job.
</Warning> 