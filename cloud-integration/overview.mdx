---
title: "Cloud Integration"
description: "Guide to integrating Gulp with cloud services"
---

# Cloud Integration

Gulp provides seamless integration with major cloud providers for state management, storage, and streaming services.

## AWS Integration

### 1. State Backend Configuration

Configure S3-based state backend:

```yaml
stateBackend:
  type: "rocksdb"
  incrementalCheckpoints: true
  storageConfig:
    type: "s3"
    basePath: "s3://gulp-flink-artifacts/flink-ha"
    checkpointsPath: "s3://gulp-flink-artifacts/flink-checkpoints"
    savepointsPath: "s3://gulp-flink-artifacts/flink-savepoints"
  retainOnCancellation: true
  minPauseBetweenCheckpoints: 1000
  tolerableCheckpointFailureNumber: 2
```

### 2. Kinesis Integration

Configure Kinesis source and sink:

```yaml
sources:
  - id: "kinesisSource"
    type: "kinesis"
    config:
      stream: "input-stream"
      region: "us-west-2"
      initialPosition: "LATEST"
      enhancedFanOut: true
      consumerConfig:
        maxRecordsPerFetch: 10000
        fetchInterval: "200ms"
        
sinks:
  - id: "kinesisSink"
    type: "kinesis"
    input: "processedStream"
    config:
      stream: "output-stream"
      region: "us-west-2"
      batchSize: 500
      batchIntervalMillis: 100
      maxBufferedRequests: 10000
```

### 3. MSK (Managed Streaming for Kafka)

Configure MSK connections:

```yaml
sources:
  - id: "mskSource"
    type: "kafka"
    config:
      bootstrapServers: "${MSK_BROKERS}"
      securityProtocol: "SASL_SSL"
      saslMechanism: "AWS_MSK_IAM"
      topic: "input-topic"
      groupId: "gulp-consumer"
      
sinks:
  - id: "mskSink"
    type: "kafka"
    input: "processedStream"
    config:
      bootstrapServers: "${MSK_BROKERS}"
      securityProtocol: "SASL_SSL"
      saslMechanism: "AWS_MSK_IAM"
      topic: "output-topic"
```

## GCP Integration

### 1. Cloud Storage State Backend

Configure GCS-based state backend:

```yaml
stateBackend:
  type: "rocksdb"
  incrementalCheckpoints: true
  storageConfig:
    type: "gcs"
    basePath: "gs://gulp-flink-artifacts/flink-ha"
    checkpointsPath: "gs://gulp-flink-artifacts/flink-checkpoints"
    savepointsPath: "gs://gulp-flink-artifacts/flink-savepoints"
  retainOnCancellation: true
  minPauseBetweenCheckpoints: 1000
```

### 2. Pub/Sub Integration

Configure Pub/Sub source and sink:

```yaml
sources:
  - id: "pubsubSource"
    type: "pubsub"
    config:
      projectId: "my-project"
      subscription: "input-subscription"
      maxOutstandingMessages: 1000
      maxOutstandingBytes: "1GB"
      
sinks:
  - id: "pubsubSink"
    type: "pubsub"
    input: "processedStream"
    config:
      projectId: "my-project"
      topic: "output-topic"
      batchSize: 100
      requestBytesThreshold: "1MB"
```

## Authentication

### 1. AWS Authentication

Configure AWS credentials:

```yaml
authentication:
  aws:
    type: "default"  # default, profile, or static
    region: "us-west-2"
    profile: "production"  # Optional
    credentials:  # Optional
      accessKeyId: "${AWS_ACCESS_KEY_ID}"
      secretAccessKey: "${AWS_SECRET_ACCESS_KEY}"
      sessionToken: "${AWS_SESSION_TOKEN}"  # Optional
```

### 2. GCP Authentication

Configure GCP credentials:

```yaml
authentication:
  gcp:
    type: "service_account"  # service_account or compute_engine
    projectId: "my-project"
    credentials:
      path: "/path/to/credentials.json"
      # Or inline credentials
      json: "${GCP_CREDENTIALS_JSON}"
```

## Network Configuration

### 1. VPC Configuration

Configure network settings:

```yaml
network:
  vpc:
    enabled: true
    subnetIds: ["subnet-1", "subnet-2"]
    securityGroupIds: ["sg-1", "sg-2"]
  privateLink:
    enabled: true
    endpoints:
      - service: "kinesis"
        region: "us-west-2"
      - service: "s3"
        region: "us-west-2"
```

### 2. Cloud NAT Configuration

Configure outbound internet access:

```yaml
network:
  nat:
    type: "managed"  # managed or custom
    ipAddresses: ["34.1.2.3", "34.1.2.4"]
    minPorts: 2048
    tcpEstablishedTimeout: "1200s"
```

## Monitoring Integration

### 1. CloudWatch Integration

Configure CloudWatch metrics:

```yaml
monitoring:
  cloudwatch:
    enabled: true
    namespace: "Gulp/Flink"
    region: "us-west-2"
    metrics:
      - name: "checkpointDuration"
        unit: "Milliseconds"
        resolution: 60
      - name: "recordsProcessed"
        unit: "Count"
        resolution: 60
```

### 2. Cloud Monitoring Integration

Configure Cloud Monitoring:

```yaml
monitoring:
  cloudMonitoring:
    enabled: true
    projectId: "my-project"
    metrics:
      - name: "custom.googleapis.com/flink/records_processed"
        type: "custom.googleapis.com/flink"
        labels:
          - key: "job_name"
          - key: "task_name"
```

## Resource Management

### 1. Auto Scaling

Configure auto scaling:

```yaml
scaling:
  enabled: true
  minTaskManagers: 1
  maxTaskManagers: 10
  targetMetrics:
    - type: "cpu"
      target: 70
    - type: "memory"
      target: 80
  cooldown:
    scaleUp: "3m"
    scaleDown: "5m"
```

### 2. Resource Allocation

Configure resource allocation:

```yaml
resources:
  taskManager:
    cpu: 2
    memory: "4GB"
    ephemeralStorage: "20GB"
  jobManager:
    cpu: 1
    memory: "2GB"
    ephemeralStorage: "10GB"
```

## Disaster Recovery

### 1. Multi-Region Configuration

Configure multi-region deployment:

```yaml
disasterRecovery:
  enabled: true
  regions:
    primary: "us-west-2"
    secondary: "us-east-1"
  replication:
    mode: "async"  # async or sync
    checkpointInterval: "1m"
  failover:
    automatic: true
    healthCheck:
      interval: "10s"
      timeout: "5s"
      failureThreshold: 3
```

### 2. Backup Configuration

Configure state backups:

```yaml
backup:
  enabled: true
  schedule: "0 0 * * *"  # Daily
  retention:
    days: 30
    copies: 3
  destination:
    type: "s3"
    bucket: "gulp-backups"
    prefix: "flink-state"
``` 