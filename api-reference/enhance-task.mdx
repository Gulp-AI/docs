---
title: 'Enhance Task'
description: 'API reference for the enhance task endpoint'
---

The `/enhance_task` endpoint enriches tasks with relevant knowledge and context to improve agent responses.

This endpoint should be used whenever a user is prompting an agent.
If your agent spawns sub sub agents, each sub task should also call this endpoint.

## Endpoint

```bash
POST https://osmosis.gulp.dev/enhance_task
```

## Headers

| Header | Value |
|--------|-------|
| `Content-Type` | `application/json` |
| `x-api-key` | Your API key |

## Request Body

```typescript
{
  // Required: Unique identifier for the tenant/user, currently, that would be your API key
  tenant_id: string,
  
  // Required: The agent's input/query.
  // This can be a user prompt, or the task given to a sub agent.
  input_text: string,
  
  // Optional: Type of agent making the request, i.e. browser, orchestrator, etc. 
  // This is best used in multi-agent environments.
  agent_type?: string
}
```

### Parameters

| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| `tenant_id` | string | Yes | - | Unique identifier for the tenant/user |
| `input_text` | string | Yes | - | The agent's input/query |
| `agent_type` | string | No | null | Type of agent making the request |

## Example Requests

<CodeGroup>

```bash cURL
curl -X POST https://osmosis.gulp.dev/enhance_task \
  -H "Content-Type: application/json" \
  -H "x-api-key: your-api-key" \
  -d '{
    "tenant_id": "webarena",
    "input_text": "Process refund request for damaged item",
    "agent_type": "support_agent"
  }'
```

```typescript TypeScript
// Example using axios
const enhanceTask = async () => {
  const axios = require('axios');
  
  const response = await axios.post('https://osmosis.gulp.dev/enhance_task', {
    tenant_id: 'webarena',
    input_text: 'Process refund request for damaged item',
    agent_type: 'support_agent'
  }, {
    headers: {
      'Content-Type': 'application/json',
      'x-api-key': 'your-api-key'
    }
  });
  
  return response.data;
};
```

```javascript JavaScript
fetch('https://osmosis.gulp.dev/enhance_task', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'x-api-key': 'your-api-key'
  },
  body: JSON.stringify({
    tenant_id: 'webarena',
    input_text: 'Process refund request for damaged item',
    agent_type: 'support_agent'
  })
})
.then(response => response.json())
.then(data => console.log(data));
```

```python Python
import requests

url = "https://osmosis.gulp.dev/enhance_task"
headers = {
    "Content-Type": "application/json",
    "x-api-key": "your-api-key"
}
payload = {
    "tenant_id": "webarena",
    "input_text": "Process refund request for damaged item",
    "agent_type": "support_agent"
}

response = requests.post(url, json=payload, headers=headers)
data = response.json()
```

```go Go
package main

import (
    "bytes"
    "encoding/json"
    "io/ioutil"
    "net/http"
)

func enhanceTask() ([]byte, error) {
    payload := map[string]interface{}{
        "tenant_id":  "webarena",
        "input_text": "Process refund request for damaged item",
        "agent_type": "support_agent",
    }

    jsonData, err := json.Marshal(payload)
    if err != nil {
        return nil, err
    }

    req, err := http.NewRequest("POST", "https://osmosis.gulp.dev/enhance_task", bytes.NewBuffer(jsonData))
    if err != nil {
        return nil, err
    }

    req.Header.Set("Content-Type", "application/json")
    req.Header.Set("x-api-key", "your-api-key")

    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        return nil, err
    }
    defer resp.Body.Close()

    return ioutil.ReadAll(resp.Body)
}
```

</CodeGroup>

## Response

### Success Response

```typescript
{
  // The processed response
  response: string,
  
  // Optional metadata about the enhancement
  metadata?: Record<string, any>
}
```

Example:

```json
{
  "response": "Based on the refund request for the damaged item, I recommend processing a full refund following standard support procedures for high-priority cases.",
  "metadata": {
    // We use techniques like Monte Carlo Tree Search (MCTS) when gathering recommendations.
    // This confidence score is a simple calculation of the agreement between branches.
    "confidence_score": 0.95,
    "agent_type": "support_agent",
  }
}
```

### Error Response

```typescript
{
  // Error details array
  detail: Array<{
    // Location of the error
    loc: Array<string | number>,
    // Error message
    msg: string,
    // Error type
    type: string
  }>
}
```

Example:

```json
{
  "detail": [
    {
      "loc": ["body", "tenant_id"],
      "msg": "field required",
      "type": "value_error.missing"
    }
  ]
}
```

## Response Codes

| Code | Description |
|------|-------------|
| 200 | Enhancement successful |
| 422 | Validation error |

## Error Codes

| Code | Description |
|------|-------------|
| `value_error.missing` | Required field is missing |
| `value_error.json` | Invalid JSON in request body |
| `type_error` | Incorrect type for a field |
| `value_error` | Invalid value for a field |